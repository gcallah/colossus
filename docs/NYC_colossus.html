<html>
    <head>
        <meta charset="UTF-8">
        <title>
           NYC_colossus Documentation
        </title>
    </head>

    <body>

        <h1>
            NYC_colossus Documentation
        </h1>

        <h2>Requirements</h2>

        <h4>Frontend</h4>
        <ul>

            <li>Allow emails to be sent out</li> 
            Completed: Completed. Using MailGun. Configuration information in /colossus.settings.py EMAIL SETTINGS and FIRST_PARTY APP SETTINGS</br>
            Currently sent through Joel's email addr: jocastillo@records.nyc.gov
            <li>Allow upload of HTML template in application </li>
            Completed: template module with better editor: tinymce
            <li>Store newsletter statistics (delivery success / failures) </li>
            Completed: Dashboard module
            <li>Ability to provide attachments (custom or single attachment)</li>
            Completed: Campaigns module
            <li>Provide contact list management features (add, edit, remove contacts) </li>
            Completed: List module
            <li>Includes the ability to manage multiple contact lists</li>
            Completed: List module
            <li>Allow design of emails in application (WYSYWIG Editor) </li>
            Completed: template module & has already replaced a better editor: tinymce

        </ul>

        <h4>Backend</h4>
        <ul>

            <li>Login with NYC.ID (SAML 2.0 Identity Provider)</li>
            Not Implemented: Configuration is completed
            <li>Permissions for sending, managing contact list, and editing / creating newsletters</li>
        </ul>

    <h2>Feature Overview</h2>
        <ul>

            <li>Login (currently):</li>

            Verify by username and password</br>
            Use registered email address to reset the password

            <li>Dashboard Activity:</li>

            Show the statistics of each campaign (open rates or more)

            <li>Campaigns:</li>

            Create and send new subscribe emails</br>
            It's possible to send it directly or at a scheduled time</br>
            When create a new campaign, input the campaign's name</br>
            Load recipients by choosing existed mailing lists and tags;</br>
            Input who is sending this email and his email address (this is not the actual email to send newsletter which is already designated in configuration files);</br>
            Add a subject;</br>
            Choose email templates, WYSYWIG editor is available</br>
            Monitor the rate of opening the links (if there is some in the campaign contents)</br>

            <li>Mailing Lists:</li>
    
            Create lists by providing list names and other information;</br>
            Either import subscibers or input them manually</br>
            Can add speciliazed embedded forms, tags, unsubscribe link and modify other settings in every mailing list

            <li>Templates:</li>

            Create email templates by copy and paste HTML templates</br>
            Editor: tinymce


            <li>Overview:</li>

            Create and manage multiple mailing lists;</br>
            Import lists from other providers (csv files or paste email addresses);</br>
            Create reusable email templates;</br>
            Customize sign up pages (subscribe, unsubscribe, thank you page, etc.);</br>
            Default double opt-in for sign ups;</br>
            Schedule email campaign to send on a specific date and time;</br>
            Track email opens and clicks;</br>
            Change link URL after email is sent;</br>
            Reports with geolocation;</br>
            Compatible with Mailgun, SendGrid, Mandrill, or any other SMTP email service.
        </ul>

    <h2>SAML Configurations</h2>
        <ul>

            <li>Library Import</li>
            /requirements/production.txt
            <li>Basic Settings</li>
            /instance/saml/settings.json.example
            <li>Advanced Settings</li>
            /instance/saml/advanced_settings.json.example
            <li>SAML Settings in Project</li>
            /colossus/settings.py

            
        </ul>

    <h2>SAML Reference</h2>
        <ul>

            <li>
                <a href="https://github.com/fangli/django-saml2-auth">https://github.com/fangli/django-saml2-auth</a> <br>
                An example of saml2 authentication with django.
            </li>

            <li>
                <a href="https://github.com/onelogin/python-saml">https://github.com/onelogin/python-saml</a> <br>
                Another example of saml authentication with django.
            </li>

            <li>
                <a href="https://developers.onelogin.com/saml/python">https://developers.onelogin.com/saml/python</a> <br>
                Offcial set up document of SAML onelogin that NYC uses.
            </li>

            <li>People to Contact: Joel Castillo (jocastillo@records.nyc.gov)
            </li>


        </ul>

    <h2>Others</h2>
        <ul>

            <li>Database login module: /colossus/apps/accounts</li>
            <li>Database signup module: /colossus/apps/core</li>

			<li>Use django's default django.contrib.auth. </br>
			E.g. auth_views.LoginView.as_view()</li>     
        </ul>

    <h2>What to do</h2>
        <ul>

            <li>Eliminate django.contrib.auth in apps/accounts/urls.py</li>
            <li>Replace db models with saml_auth in accounts/models.py</li>
            <li>Replace account model in accounts/views.py</li>
            <li>Eliminate current forms in apps/accounts/forms.py</li>
			<li>Eliminate django.contrib.auth in apps/core/urls.py</li>     
        </ul>

    </body>
</html>
